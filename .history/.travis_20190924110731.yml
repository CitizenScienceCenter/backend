language: python
python:
  - "3.6"
install:
  - pip install -r requirements.txt
addons:
  postgresql: "9.4"
before_script:
  - psql -c "CREATE USER testing WITH PASSWORD 'testing';" -U postgres
  - psql -c "CREATE DATABASE testcs WITH OWNER testing;" -U postgres
services:
  - postgresql
env:
  - CC_ENV=config/test.cfg
script:
  - pytest test/
notifications:
  webhooks:
    - https://chat.citizenscience.ch/hooks/HyKJmkFFsxjNTx2ce/RkjhJoNPEXLgnCbpKnkDL4iodkZhiCdRxGKaM8mu79mAcmRx
    - https://hooks.citizenscience.ch/hooks/redeploy-openapi?token=SI6nhAHR5nXCoe

